import{r as D,R as h,j as S}from"./index-Db1ALHkZ.js";function x(t){return t*Math.PI/180}function O(t,e,n){return t>n?n:t<e?e:t}function k(t,e){return e/100*t}function W(t,e){return t+e/2}function j(t,e){var n=x(t);return{dx:e*Math.cos(n),dy:e*Math.sin(n)}}function C(t){return typeof t=="number"}function M(t,e){return typeof t=="function"?t(e):t}function L(t,e){var n=Object.assign({},e,t);for(var a in e)t[a]===void 0&&(n[a]=e[a]);return n}function z(t){for(var e=0,n=0;n<t.length;n++)e+=t[n].value;return e}function V(t){for(var e=t.data,n=t.lengthAngle,a=t.totalValue,r=t.paddingAngle,i=t.startAngle,l=a||z(e),s=O(n,-360,360),d=Math.abs(s)===360?e.length:e.length-1,c=Math.abs(r)*Math.sign(n),u=c*d,o=s-u,g=0,b=[],v=0;v<e.length;v++){var y=e[v],A=l===0?0:y.value/l*100,P=k(o,A),f=g+i;g=g+P+c,b.push(Object.assign({percentage:A,startAngle:f,degrees:P},y))}return b}function R(t,e){if(t==null)return{};var n={},a=Object.keys(t),r,i;for(i=0;i<a.length;i++)r=a[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function I(t){var e=t.renderLabel,n=t.labelProps,a=e(n);if(typeof a=="string"||typeof a=="number"){n.dataEntry,n.dataIndex;var r=R(n,["dataEntry","dataIndex"]);return h.createElement("text",Object.assign({dominantBaseline:"central"},r),a)}return h.isValidElement(a)?a:null}function T(t){var e=1e14;return Math.round((t+Number.EPSILON)*e)/e}function N(t){var e=t.labelPosition,n=t.lineWidth,a=t.labelHorizontalShift,r=T(a);if(r===0)return"middle";if(e>100)return r>0?"start":"end";var i=100-n;return e<i?r>0?"end":"start":"middle"}function $(t,e){return t.map(function(n,a){var r,i=(r=M(e.segmentsShift,a))!=null?r:0,l=k(e.radius,e.labelPosition)+i,s=j(W(n.startAngle,n.degrees),l),d=s.dx,c=s.dy,u={x:e.center[0],y:e.center[1],dx:d,dy:c,textAnchor:N({labelPosition:e.labelPosition,lineWidth:e.lineWidth,labelHorizontalShift:d}),dataEntry:n,dataIndex:a,style:M(e.labelStyle,a)};return u})}function F(t,e){var n=e.label;if(n)return $(t,e).map(function(a,r){return h.createElement(I,{key:"label-"+(a.dataEntry.key||r),renderLabel:n,labelProps:a})})}var H=function(e,n,a,r,i){var l=i-r;if(l===0)return[];var s=a*Math.cos(r)+e,d=a*Math.sin(r)+n,c=a*Math.cos(i)+e,u=a*Math.sin(i)+n,o=Math.abs(l)<=Math.PI?"0":"1",g=l<0?"0":"1";return[["M",s,d],["A",a,a,0,o,g,c,u]]},K=H,X=K;function Y(t,e,n,a,r){var i=O(a,-359.999,359.999);return X(t,e,r,x(n),x(n+i)).map(function(l){return l.join(" ")}).join(" ")}function E(t){var e=t.cx,n=t.cy,a=t.lengthAngle,r=t.lineWidth,i=t.radius,l=t.shift,s=l===void 0?0:l,d=t.reveal,c=t.rounded,u=t.startAngle,o=t.title,g=R(t,["cx","cy","lengthAngle","lineWidth","radius","shift","reveal","rounded","startAngle","title"]),b=i-r/2,v=j(W(u,a),s),y=v.dx,A=v.dy,P=Y(e+y,n+A,u,a,b),f,w;if(C(d)){var B=x(b)*a;f=Math.abs(B),w=f-k(f,d)}return h.createElement("path",Object.assign({d:P,fill:"none",strokeWidth:r,strokeDasharray:f,strokeDashoffset:w,strokeLinecap:c?"round":void 0},g),o&&h.createElement("title",null,o))}function U(t,e,n){var a="stroke-dashoffset "+t+"ms "+e;return n&&n.transition&&(a=a+","+n.transition),{transition:a}}function q(t){return t.animate&&!C(t.reveal)?100:t.reveal}function m(t,e){return t&&function(n){t(n,e)}}function G(t,e,n){var a=n??q(e),r=e.radius,i=e.center,l=i[0],s=i[1],d=k(r,e.lineWidth),c=t.map(function(u,o){var g=M(e.segmentsStyle,o);return h.createElement(E,{cx:l,cy:s,key:u.key||o,lengthAngle:u.degrees,lineWidth:d,radius:r,rounded:e.rounded,reveal:a,shift:M(e.segmentsShift,o),startAngle:u.startAngle,title:u.title,style:Object.assign({},g,e.animate&&U(e.animationDuration,e.animationEasing,g)),stroke:u.color,tabIndex:e.segmentsTabIndex,onBlur:m(e.onBlur,o),onClick:m(e.onClick,o),onFocus:m(e.onFocus,o),onKeyDown:m(e.onKeyDown,o),onMouseOver:m(e.onMouseOver,o),onMouseOut:m(e.onMouseOut,o)})});return e.background&&c.unshift(h.createElement(E,{cx:l,cy:s,key:"bg",lengthAngle:e.lengthAngle,lineWidth:d,radius:r,rounded:e.rounded,startAngle:e.startAngle,stroke:e.background})),c}var J={animationDuration:500,animationEasing:"ease-out",center:[50,50],data:[],labelPosition:50,lengthAngle:360,lineWidth:100,paddingAngle:0,radius:50,startAngle:0,viewBoxSize:[100,100]};function Q(t){var e=L(t,J),n=D.useState(e.animate?0:null),a=n[0],r=n[1];D.useEffect(function(){e.animate&&r(null)},[]);var i=V(e);return h.createElement("svg",{viewBox:"0 0 "+e.viewBoxSize[0]+" "+e.viewBoxSize[1],width:"100%",height:"100%",className:e.className,style:e.style},G(i,e,a),F(i,e),e.children)}const Z=({probabilities:t})=>{const e=t.reduce((a,r)=>a+r.probability,0),n=t.map(a=>({title:a.country,value:a.probability*100,color:"#"+Math.floor(Math.random()*16777215).toString(16)}));return e<1&&n.push({title:"Other",value:(1-e)*100,color:"#cccccc"}),S.jsx(Q,{data:n,label:({dataEntry:a})=>`${a.title} (${a.value.toFixed(2)}%)`,labelStyle:{fontSize:"5px",fill:"#000"},radius:15,labelPosition:112})},p=()=>S.jsx("div",{children:S.jsx(Z,{probabilities:[{country:"USA",probability:.5},{country:"Canada",probability:.3},{country:"Mexico",probability:.2}]})});typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{p as ProbabilityDisplayExamples};
